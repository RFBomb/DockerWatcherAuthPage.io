<html>
<head>
    <title>Authentication Page for TwitchWatcher API</title>
</head>
<body>
    <p>This page is meant to help set up the DockerWatcher apps. Click the Authorize button below to receive an API Token that can be submitted into the application.</p>
    <br> Apps that can use this functionality: <br>
    <a href="https://github.com/D3vl0per/Twitch-watcher">D3vl0per/Twitch-watcher</a><br>
    <a href="https://github.com/PurpleMyst/Valorant-watcher">PurpleMyst/Valorant-watcher</a><br>
    <br><br>
    </p>
<a href="" id="authorize">Authorize</a>
    <div id="access_token"></div>
    <div id="user_data"></div>

    <script type="text/javascript">
        // go populate this with a client_id
        var client_id = 'y4344ir7sj3tem9cqnzkv288grm4e9';
        var redirect = 'https://rfbomb.github.io/DockerWatcherAuthPage.io/';

        document.getElementById('authorize').setAttribute('href', 'https://id.twitch.tv/oauth2/authorize?client_id=' + client_id + '&redirect_uri=' + encodeURIComponent(redirect) + '&response_type=token')
        document.getElementById('access_token').textContent = '';

        if (document.location.hash) {
            var parsedHash = new URLSearchParams(window.location.hash.substr(1));
            if (parsedHash.get('access_token')) {
                var access_token = parsedHash.get('access_token');
                document.getElementById('access_token').textContent = 'Your API Access Key from the url (Submit this as your APIAccessToken): ' + access_token;
            }
        }
    </script>
</body>
</html>
